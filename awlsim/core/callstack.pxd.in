from awlsim.core.cpu cimport *
from awlsim.core.blocks cimport *
from awlsim.core.datablocks cimport *
from awlsim.core.lstack cimport *
from awlsim.core.memory cimport *
from awlsim.core.parameters cimport *
from awlsim.core.operators cimport *

cdef public frozenset callByRef_Types

cdef class CallStackElem(object):
	cdef public CallStackElem prevCse
	cdef public S7CPU cpu
	cdef public list parenStack
	cdef public uint32_t ip
	cdef public CodeBlock block
	cdef public list insns
	cdef public _Bool isRawCall
	cdef public DB instanceDB
	cdef public DB prevDbRegister
	cdef public DB prevDiRegister
	cdef public uint32_t prevAR2value
	cdef public AwlMemory localdata
	cdef public list _outboundParams
	cdef public dict _interfRefs

	cpdef AwlOperator getInterfIdxOper(self, uint32_t interfaceFieldIndex)
	cdef bytearray _FB_trans_dbpointer(self, AwlParamAssign param, AwlOperator rvalueOp)
	cdef handleBlockExit(self)

cdef CallStackElem make_CallStackElem(S7CPU cpu,
				       CodeBlock block,
				       DB instanceDB,
				       AwlOffset instanceBaseOffset,
				       tuple parameters,
				       _Bool isRawCall)
